namespace StellarSurvivors.WorldGen;

using System.Drawing;
using System.Collections.Generic;

public class RoomLibrary
{
    public Dictionary<string, RoomPrefab> Prefabs { get; private set; }

    public RoomLibrary()
    {
        Prefabs = new Dictionary<string, RoomPrefab>();
        LoadRooms();
    }

    private void LoadRooms()
    {
        // 1=Stone, 0=Air, 9=TreasureChest, 8=Door
        int[,] roomData = new int[,]
        {
            { 9, 9, 9, 9, 9, 9, 9 },
            { 9, 0, 0, 0, 0, 0, 9 },
            { 9, 0, 0, 0, 0, 0, 9 },
            { 9, 0, 0, 6, 0, 0, 9 },
            { 9, 0, 0, 0, 0, 0, 9 },
            { 9, 0, 0, 0, 0, 0, 9 },
            { 9, 9, 4, 4, 4, 9, 9 }
        };

        var testRoom = new RoomPrefab
        {
            ID = "TestVault",
            TileData = roomData,
            Entrance = new Point(2, 3) 
        };
        Prefabs.Add(testRoom.ID, testRoom);
        
        // --- Simple Room ---
        int[,] treasureRoomData = new int[,]
        {
            { 9, 9, 9, 9, 9, 9, 9 },
            { 9, 0, 0, 0, 0, 0, 9 },
            { 9, 0, 0, 0, 0, 0, 9 },
            { 9, 0, 0, 6, 0, 0, 9 },
            { 9, 0, 0, 0, 0, 0, 9 },
            { 9, 0, 0, 0, 0, 0, 9 },
            { 9, 9, 4, 4, 4, 9, 9 }
        };
        Prefabs.Add("TreasureRoom", new RoomPrefab
        {
            ID = "TreasureRoom",
            TileData = treasureRoomData,
            Entrance = new Point(3, 6) // [x, y] from top-left
        });

        // --- Room: Winding Corridor ---
        int[,] windingCorridorData = new int[,]
        {
            { 9, 9, 9, 9, 9 },
            { 9, 6, 0, 0, 9 }, // Loot at the end
            { 9, 9, 9, 0, 9 },
            { 9, 0, 0, 0, 9 },
            { 9, 0, 9, 9, 9 },
            { 9, 0, 0, 0, 9 },
            { 9, 9, 9, 0, 9 },
            { 9, 0, 0, 0, 9 },
            { 9, 9, 4, 9, 9 }  // Entrance
        };
        Prefabs.Add("WindingCorridor", new RoomPrefab
        {
            ID = "WindingCorridor",
            TileData = windingCorridorData,
            Entrance = new Point(2, 8)
        });

        // --- Room: Loot Cross ---
        int[,] lootCrossData = new int[,]
        {
            { 9, 9, 9, 9, 9, 9, 9 },
            { 9, 0, 0, 7, 0, 0, 9 }, // Gold
            { 9, 0, 0, 0, 0, 0, 9 },
            { 9, 6, 0, 0, 0, 6, 9 }, // Iron
            { 9, 0, 0, 0, 0, 0, 9 },
            { 9, 0, 0, 0, 0, 0, 9 },
            { 9, 9, 4, 4, 4, 9, 9 }  // Entrance
        };
        Prefabs.Add("LootCross", new RoomPrefab
        {
            ID = "LootCross",
            TileData = lootCrossData,
            Entrance = new Point(3, 6)
        });

        // --- Room: Flooded Vault ---
        int[,] floodedVaultData = new int[,]
        {
            { 9, 9, 9, 9, 9, 9, 9, 9, 9, 9 },
            { 9, 0, 0, 0, 3, 3, 3, 0, 0, 9 },
            { 9, 0, 3, 3, 3, 3, 3, 3, 0, 9 },
            { 9, 0, 3, 3, 9, 9, 3, 3, 0, 9 },
            { 9, 3, 3, 3, 9, 7, 9, 3, 3, 9 },
            { 9, 0, 3, 3, 9, 9, 3, 3, 0, 9 },
            { 9, 0, 0, 3, 3, 3, 3, 0, 0, 9 },
            { 9, 9, 9, 9, 4, 4, 9, 9, 9, 9 }  
        };
        Prefabs.Add("FloodedVault", new RoomPrefab
        {
            ID = "FloodedVault",
            TileData = floodedVaultData,
            Entrance = new Point(4, 7)
        });
        // --- Room: Flooded Vault ---
        int[,] roundRoomData = new int[,]
        {
            {4,4,4,4,4,9,9,9,9,9,9,9,9,9,9,9,4,4,4,4},
            {4,4,4,9,9,9,0,0,0,0,0,0,0,0,0,9,9,9,4,4},
            {4,4,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,4},
            {4,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9},
            {9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9},
            {9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9},
            {9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
            {9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
            {9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
            {9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
            {9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9},
            {9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9},
            {9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9},
            {9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,4},
            {4,4,9,9,0,0,0,0,0,0,0,0,0,0,0,0,9,9,4,4},
            {4,4,4,9,9,9,0,0,0,0,0,0,0,0,9,9,9,4,4,4},
            {4,4,4,4,4,9,9,9,9,9,9,9,9,9,9,4,4,4,4,4}
        };
        Prefabs.Add("roundRoom", new RoomPrefab
        {
            ID = "roundRoom",
            TileData = roundRoomData,
            Entrance = new Point(4, 7)
        });
        // --- Room: Flooded Vault ---
        int[,] squareRoom3Data = new int[,]
        {
            {4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4},
            {4,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,9,0,0,0,0,9,9,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,9,0,0,0,0,9,9,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,9,0,0,0,0,9,9,9,9,9,9,9,4},
            {4,9,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,9,9,9,9,9,9,9,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,9,9,9,4},
            {4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4}

        };
        Prefabs.Add("squareRoom3", new RoomPrefab
        {
            ID = "squareRoom3",
            TileData = squareRoom3Data,
            Entrance = new Point(4, 7)
        });
        // --- Room: Flooded Vault ---
        int[,] squareRoom2Data = new int[,]
        {
            {4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4},
                {4,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
                {4,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,9,9,9,4},
                {4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4}

        };
        Prefabs.Add("squareRoom2", new RoomPrefab
        {
            ID = "squareRoom2",
            TileData = squareRoom2Data,
            Entrance = new Point(4, 7)
        });
        // --- Room: Flooded Vault ---
        int[,] squareRoom1Data = new int[,]
        {
            {4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4},
            {4,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,9,9,9,9,9,9,9,9,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4},
            {4,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,9,9,9,4},
            {4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4}
        };
        Prefabs.Add("squareRoom1", new RoomPrefab
        {
            ID = "squareRoom1",
            TileData = squareRoom1Data,
            Entrance = new Point(4, 7)
        });
        
    }
    
    public RoomPrefab GetRandomPrefab(Random random)
    {
        // Simple way to get a random value from a dictionary
        var keyList = new List<string>(Prefabs.Keys);
        string randomKey = keyList[random.Next(keyList.Count)];
        return Prefabs[randomKey];
    }
}